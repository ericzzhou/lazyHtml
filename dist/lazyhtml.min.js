!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LazyHtml=e():t.LazyHtml=e()}(self,(()=>{return t={10:(t,e,o)=>{t.exports=o(244)},449:t=>{class e{constructor(t,e){this.element=t,this.config=e,console.log(t,e)}async init(){let t={method:this.config.response.method,headers:this.config.response.headers};"POST"===this.config.response.method&&(t.body=this.config.response.body);let e,o=await fetch(this.config.response.url,t);return"html"===this.config.response.type?(e=await o.text(),this.DrawHtml(e)):e=await o.json(),{type:this.config.response.responseType,content:e}}DrawHtml(t){this.element&&(this.config&&this.config.target&&this.element.querySelector(this.config.target)?this.element.querySelector(this.config.target).innerHTML=t:this.element.innerHTML=t)}}t.exports=e,t.exports.default=e},244:(t,e,o)=>{const n=o(449);class s{constructor(t,e={distance:0,lazy:!0,attr:"lazy"}){this.element=document.querySelector(t),this.options=e}async dispatch(t,e){let{method:o,response:s}=t,i=null;return"ajax"===o?i=await new n(e,t).init():console.info("没有匹配到正确的分发器",t),i}listenScroll(t){window.addEventListener("scroll",t)}unlistenScroll(t){window.removeEventListener("scroll",t)}init(){let t=this.lazyLoad.bind(this);t();let e=this.throttle(t);this.listenScroll(e)}throttle(t,e=500){let o=null;return function(){o||(o=setTimeout((()=>{t(),o=null}),e))}}lazyLoad(){let t=this.getLazyElements();if(0===t.length)return;let e=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight;t.forEach((t=>{let n=t.offsetTop,s=t.offsetHeight,i=this.options.distance;if(n+s+i>e&&n<e+o+i)try{let e=t.querySelector('script[type="application/json"]').textContent;console.log("json 配置内容",e);let o=JSON.parse(e);this.dispatch(o,t).then((e=>{this.setLazyAttr(t,"loaded"),this.options.onLoad(t,o,this.options)}))}catch(e){console.error('没有发现元素配置，请检查元素内是否有 <script type="application/json"> 标签，并且内容是 JSON 格式',t,e)}}))}getLazyElements(){return this.element.querySelectorAll(`[${this.options.attr}]:not([${this.options.attr}="loaded"])`)}setLazyAttr(t,e){t.setAttribute(this.options.attr,e)}debounce(t){let e=null;return function(){e&&clearTimeout(e),e=setTimeout((()=>{t()}),500)}}}t.exports=s,t.exports.default=s}},e={},function o(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}(10);var t,e}));